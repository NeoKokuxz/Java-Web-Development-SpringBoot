# Splunk

## What is Splunk?
> Splunk is a search engine for IT data that was created to analyze machine-generated data. We encourage you to read the official documentation to get a clear insight of the Splunk and its capabilities.
- Link: https://docs.splunk.com/Documentation

## Machine-generated data
> Machine-generated data refers to the data generated by application logs, server logs, network devices, sensors, IoT, cloud services, or mobile services. The data could be structured or unstructured.

- Structured data has clearly defined data-types and a particular pattern e.g., relational data. It resides in a database, on which we can run queries.
- Unstructured data has no specific pattern e.g., textual log messages, reviews on the eCommerce platform.

## Challenges without Splunk
>Machine-generated data is challenging to analyze because:

- Its volume is high
- Sometimes it is unstructured, thus requires a pre-processing

## Benefits
> Splunk helps generate information from machine-generated data and provides insights quickly. It helps to scale the data input limitlessly. It also provides machine learning capabilities to build auto-alert systems. Splunk helps the user to leverage machine-generated data in gauging the system performance, investigating the failure conditions, developing the business matrix, data visualization, and many more benefits.

## Deployment Meodels
- Search Head
  - Responds to a search request
- Indexer
  - Converts the forwarder's raw data  into events and indexes it into a bucket
- Forwarder(2 types: Universal or Heavy)
  - Forwards raw data
  
## Deployment Topology
> There could be different deployment topology based on the requirements of the project. The following are the examples:

- Single host - independent search heads manage searches for a group of independent indexers.
- High Availability - a group of indexers replicate data among themselves to ensure high data availability.
- Multiple data store clustering - a group of search heads share search management responsibilities.
- Multiple datastore peering - common in larger deployments. It is similar to the pattern of high availability, except that the search management function is handled by a search head cluster instead of individual search heads.
- Documentation: https://www.splunk.com/themes/splunk_com/img/assets/pdfs/education/SplunkDeploymentGuide2_1.pdf

## Splunk Input Process
- Parse Queue
- Parsing Pipeline
  - Characterset Normalization
  - Line termination identification
  - Timestamp identification/normalization, event boundary identification
  - regex transforms, parse-time field creation
- Index Queue
- Indexing Pipeline
  - segmentation
  - index building
  
## Splunk Search Command
Guide: https://www.splunk.com/pdfs/solution-guides/splunk-quick-reference-guide.pdf
- top : Most command values of the field
- rare : Least command value of the field
- table : Creates a table using the specified fields
- stats : Provides statistics, grouped optionally by fields.
- chart/timechart : Returns results in a tabular output for time series charting
- dedup : Removes subsequent results that tmatch a specified criterion
- eval : Calculates an expression. 
- fields : Removes fields from search results
- head/tail : Returns the first/last N results
- lookup : Adds field values from an external source
- rename : Renames a field. Use wildcards to specify mutiple fields
- rex : Specifies regular expression named groups to extract fields
- search : Filters results to those that match the search expression
- sort : Sorts the search results by the specified fields
- mstats : Similar to stats but used on metrics instead of events
- transaction : Group search results into transactions
- where : Filters search results using eval expressions. Used to compare two different fields

## Forwarders
> Create or select a server class for data inputs.
- Universal Forwarder
  - Good for single instance, it  provide reliable, secure data collection from remote sources and forward that data into Splunk software for indexing and consolidation. They can scale to tens of thousands of remote systems, collecting terabytes of data.
- Heavy Forwarder
  - Use in enterprise application to forward rawdata into splunk. Uses maximum CPU and memory resources but less than an indexer. With most feature avaliable, but it can't perform distributed searches.
- Light Forwader 
  - *deprecated* consumes small CPU and memory resources. It has much more limited functionality



